/*!
 * Gaesigner From Plugin
 * version: 1.3-2016.08.24
 * Copyright (c) 2016 Team Gaesigner.com
 * QnA-email: admin@gaesigner.com
 * QnA-email: jjackkun@gmail.com
 * QnA-email: jjackkun81@naver.com
 * QnA-email: inreverse8020@gmail.com
 * Examples and documentation at: http://www.gaesigner.com/example.html
*/
function openPop(a,b){function c(){if(4===k.readyState&&200===k.status){var a=k.responseText;l.description.innerHTML=a,e(n.info,!0),d(),f(),i()}}function d(){var a=document.createElement("script"),b=l.description.querySelector("script");a.classList.add("tmp"),b&&(a.innerHTML=b.innerHTML,b.parentNode.removeChild(b)),l.openPopWrap.appendChild(a)}function e(a,b){l.title.innerHTML=a.title||m.defaultTitle,b||(l.description.innerHTML=a.description||m.defaultDescription),a.btns&&(l.btnsWrap.innerHTML="",a.btns.forEach(function(a){var b=document.createElement("button");b.setAttribute("type","button"),b.setAttribute("data-type",a.type),b.setAttribute("data-tag","popBtn"),b.textContent=a.value,l.btnsWrap.appendChild(b)})),0==a.btnsWrap&&l.btnsWrap.parentNode.removeChild(l.btnsWrap),void 0!=a.bg&&(console.log(a.bg),l.openPopWrap.style.backgroundColor="rgba( 0,0,0,"+a.bg+")"),0==a.bodyCloser&&(m.bgClickBln=!1),0==a.outsideWrap&&(l.content.classList.add("none"),l.title.classList.add("none")),1==a.btnClose&&l.content.appendChild(l.btnClose)}function f(){var a=l.openPopWrap.querySelectorAll("button[data-tag=popBtn]");[].forEach.call(a,function(a){a.addEventListener("click",h)}),l.openPopWrap.addEventListener("click",function(a){m.bgClickBln&&a.currentTarget==a.target&&j()}),window.addEventListener("scroll",g),window.addEventListener("mousewheel",g),window.addEventListener("touchmove",g)}function g(a){a.preventDefault(),a.stopPropagation(),window.scrollTo(0,m.cTop)}function h(a){var b=a.currentTarget,c=b.getAttribute("data-type"),d=null,e={};switch(c){case"confirm":d=c;break;case"cancel":d=c;break;default:d=c}null==n.callback?j():(e={type:d,closeHandler:j,elem:l.content},n.callback(e))}function i(){var a=l.content;document.body.appendChild(l.openPopWrap);var b=void 0!==window.pageXOffset,c="CSS1Compat"===(document.compatMode||""),d=(b?window.pageXOffset:c?document.documentElement.scrollLeft:document.body.scrollLeft,b?window.pageYOffset:c?document.documentElement.scrollTop:document.body.scrollTop),e=parseInt(window.getComputedStyle(a,null).getPropertyValue("border-width"));m.cTop=d,a.style.height=2*Math.ceil(a.offsetHeight/2)+2*e+"px",a.style.width=2*Math.ceil(a.offsetWidth/2)+2*e+"px"}function j(){l.openPopWrap.parentNode.removeChild(l.openPopWrap),window.removeEventListener("scroll",g),window.removeEventListener("mousewheel",g),window.removeEventListener("touchmove",g)}var k,l={},m={},n={};!function(){window.XMLHttpRequest?k=new XMLHttpRequest:window.ActiveXObject&&(k=new ActiveXObject("Microsoft.XMLHTTP"))}(),function(){l.openPopWrap=null,l.content=null,l.description=null,l.title=null,l.btnsWrap=null,l.btnClose=null}(),function(){m.activeClass="active",m.defaultTitle="알림",m.defaultDescription="내용이 없습니다",m.bgClickBln=!0,m.cTop=0}(),function(){n.callback=b||null,n.url=null,n.info=a,console.log(n.callback)}(),function(){var a,b=document.createElement("div");a='<div class="content">\n',a+='\t<h2 class="title">'+m.defaultTitle+"</h2>\n",a+='\t<div class="description">\n',a+="\t"+m.defaultDescription+"\n",a+="</div>\n",a+='\t<p class="btns">\n',a+='\t\t<button type="button" data-tag="popBtn" data-type="confirm">확인</button>\n',a+='\t\t<button type="button" data-tag="popBtn" data-type="cancel">취소</button>\n',a+="\t</p>\n",a+="</div>",b.innerHTML=a,b.classList.add("openPopWrap"),l.openPopWrap=b,l.content=l.openPopWrap.querySelector("div.content"),l.title=l.openPopWrap.querySelector("h2.title"),l.description=l.openPopWrap.querySelector("div.description"),l.btnsWrap=l.openPopWrap.querySelector("p.btns"),l.btnConfirm=l.btnsWrap.querySelector("[data-type=confirm]"),l.btnCancel=l.btnsWrap.querySelector("[data-type=cancel]"),l.btnClose=document.createElement("button"),l.btnClose.textContent="X",l.btnClose.setAttribute("data-tag","popBtn"),l.btnClose.setAttribute("data-type","cancel"),l.btnClose.classList.add("popClose")}(),function(){if(!(document.body.querySelectorAll("div.openPopWrap").length>0))switch(typeof a){case"string":console.log(a),l.description.innerHTML=a,l.btnCancel.parentNode.removeChild(l.btnCancel),f(),i();break;case"object":n.url=a.url||null,null==n.url?(e(a),f(),i()):(k.onreadystatechange=c,k.dataType="script",k.open("GET",n.url,!0),k.send());break;default:l.description="no contents",l.btnCancel.parentNode.removeChild(l.btnCancel),f(),i()}}()}window.addEventListener("load",function(){});